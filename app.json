{
  "id": "com.coulisse.motionblinds",
  "version": "1.0.3",
  "compatibility": ">=5.0.0",
  "sdk": 3,
  "brandColor": "#2F9C94",
  "homepage": "https://www.robbshop.nl/merken/robb-smarrt",
  "homeyCommunityTopicId": 45608,
  "support": "https://community.athom.com/t/app-motion-blinds/45608",
  "source": "https://github.com/EDelsman/com.coulisse.motionblinds",
  "bugs": {
    "url": "https://community.athom.com/t/app-motion-blinds/45608"
  },
  "name": {
    "en": "Motion Blinds",
    "nl": "Motion Blinds"
  },
  "description": {
    "en": "Smart window coverings, by ROBB Smarrt.",
    "nl": "Slimme raamdecoratie, van ROBB Smarrt."
  },
  "category": [
    "appliances"
  ],
  "permissions": [],
  "images": {
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "author": {
    "name": "Edwin Delsman",
    "email": "sp.delsman+motion.app@gmail.com"
  },
  "contributing": {
    "donate": {
      "paypal": {
        "username": "edwindelsman"
      }
    }
  },
  "capabilities": {
    "measure_mb_rssi": {
      "type": "number",
      "title": {
        "en": "Signal strenth",
        "nl": "Signaalsterkte"
      },
      "uiComponent": null,
      "getable": true,
      "setable": false,
      "insights": false,
      "preventtag": false,
      "units": {
        "en": "dBm",
        "nl": "dBm"
      },
      "min": -100,
      "max": 0,
      "step": 1,
      "decimals": 0
    },
    "state_mb_part_closed": {
      "type": "boolean",
      "title": {
        "en": "(Partially) closed",
        "nl": "(Deels) dicht"
      },
      "uiQuickAction": true,
      "uiComponent": null,
      "getable": true,
      "setable": false,
      "insights": false,
      "preventtag": true
    }
  },
  "flow": {
    "triggers": [
      {
        "id": "trigger_BLIND_BLOCKED",
        "title": {
          "en": "The blind was blocked",
          "nl": "Het gordijn werd geblokkeerd"
        },
        "titleFormatted": {
          "en": "The blind was blocked [[device]]",
          "nl": "Het gordijn werd geblokkeerd [[device]]"
        },
        "hint": {
          "en": "The blind refused to close because a contact alarm was active, in order to protect the blind.",
          "nl": "Het gordijn weigerde te sluiten omdat een contactalarm actief was, om zo het gordijn te beschermen."
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": {
              "driver_id": "driver_blind|driver_venetian|driver_curtain",
              "capabilities": "alarm_contact"
            }
          }
        ]
      }
    ],
    "conditions": [],
    "actions": [
      {
        "id": "action_BLOCK_BLIND",
        "title": {
          "en": "Block closing blind",
          "nl": "Blokkeer gordijn sluiten"
        },
        "titleFormatted": {
          "en": "Block closing blind [[device]]",
          "nl": "Blokkeer gordijn sluiten [[device]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": {
              "driver_id": "driver_blind|driver_venetian|driver_curtain",
              "capabilities": "alarm_contact"
            }
          }
        ]
      },
      {
        "id": "action_UNBLOCK_BLIND",
        "title": {
          "en": "Unblock closing blind",
          "nl": "Deblokkeer gordijn sluiten"
        },
        "titleFormatted": {
          "en": "Unblock closing blind [[device]]",
          "nl": "Deblokkeer gordijn sluiten [[device]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": {
              "driver_id": "driver_blind|driver_venetian|driver_curtain",
              "capabilities": "alarm_contact"
            }
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "id": "driver_blind",
      "name": {
        "en": "Blind",
        "nl": "Rolgordijn"
      },
      "class": "blinds",
      "capabilities": [
        "windowcoverings_state",
        "windowcoverings_set",
        "alarm_contact",
        "measure_battery",
        "measure_mb_rssi"
      ],
      "energy": {
        "batteries": ["INTERNAL"]
      },
      "images": {
        "large": "/drivers/driver_blind/assets/images/large.png",
        "small": "/drivers/driver_blind/assets/images/small.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices", 
          "navigation": {
            "next": "add_my_devices" 
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices" 
        }    
      ],
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Parameters",
            "nl": "Parameters"
          },
          "children": [
            {
              "id": "maxTravelTime",
              "type": "number",
              "label": {
                "en": "Maximum travel time",
                "nl": "Maximale looptijd"
              },
              "value": 60,
              "min": 10,
              "max": 300,
              "units": {
                "en": "seconds",
                "nl": "seconden"
              },
              "hint": {
                "en": "The maximum number of seconds that it takes to completely open or close. If the state of the device is not reported within this timeframe, the status will be actively retrieved. Add 5 seconds to be sure, so the state won't be retrieved too soon or unneeded.",
                "nl": "Het maximum aantal seconden dat het duurt om volledig te openen of te sluiten. Als de status van het gordijn niet binnen deze tijd binnenkomt wordt de status actief opgehaald. Voeg 5 seconden toe voor de zekerheid, zodat de status niet te vroeg of onnodig wordt opgehaald."
              }
            },
            {
              "id": "addBlockAlarm",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Add an alarm to block opening",
                "nl": "Alarm toevoegen om openen te blokkeren"
              },
              "hint": {
                "en": "Enable this to add a contact alarm to the blind. Then use flows to copy the alarm state from a window sensor, so the blind won't go down when the window is open.",
                "nl": "Zet dit aan als om een contactalarm toe te voegen aan dit gordijn. Gebruik vervolgens flows om de alarmstatus van een raansensor over te nemen, zodat het gordijn niet opengaat als het raam open is."
              }
            },
            {
              "id": "inRemoteGroup",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Part of remote groep",
                "nl": "Onderdeel van afstandsbediening-groep"
              },
              "hint": {
                "en": "If this blind is one of multiple devices controlled by the same remote at the same time, turn this on. This makes sure that when the remote changes the blinds, Homey will see all the changes. This is needed because often only one of the blinds will report the change from the remote, and the others won't.",
                "nl": "Zet dit aan als dit gordijn er één van meer gordijnen is die allemaal tegelijk met de zelfde afstandsbediening bediend worden. Dit zorgt ervoor dat Homey alle veranderingen ziet als de afstandsbediening is gebruikt. Dit is nodig omdat vaak maar van één van de gordijnen de wijziging van de afstandsbediening doorgeeft, en de overige niet."
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Properties",
            "nl": "Eigenschappen"
          },
          "children": [
            {
              "id": "deviceTypeName",
              "type": "label",
              "label": {
                "en": "Device type",
                "nl": "Apparaatklasse"
              },
              "value": "?"
            },
            {
              "id": "typeName",
              "type": "label",
              "label": {
                "en": "Type",
                "nl": "Type"
              },
              "value": "?"
            },
            {
              "id": "wirelessModeName",
              "type": "label",
              "label": {
                "en": "Wireless mode",
                "nl": "Type draadloze verbinding"
              },
              "value": "?"
            },
            {
              "id": "voltageModeName",
              "type": "label",
              "label": {
                "en": "Voltage mode",
                "nl": "Spanningstype"
              },
              "value": "?"
            }
          ]
        }
      ]
    },
    {
      "id": "driver_venetian",
      "name": {
        "en": "Venetian Blind",
        "nl": "Jaloezieën"
      },
      "class": "blinds",
      "capabilities": [
        "windowcoverings_state",
        "windowcoverings_set",
        "windowcoverings_tilt_set",
        "alarm_contact",
        "measure_battery",
        "measure_mb_rssi"
      ],
      "energy": {
        "batteries": ["INTERNAL"]
      },
      "images": {
        "large": "/drivers/driver_venetian/assets/images/large.png",
        "small": "/drivers/driver_venetian/assets/images/small.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices", 
          "navigation": {
            "next": "add_my_devices" 
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices" 
        }    
      ],
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Parameters",
            "nl": "Parameters"
          },
          "children": [
            {
              "id": "maxTravelTime",
              "type": "number",
              "label": {
                "en": "Maximum travel time",
                "nl": "Maximale looptijd"
              },
              "value": 60,
              "min": 10,
              "max": 300,
              "units": {
                "en": "seconds",
                "nl": "seconden"
              },
              "hint": {
                "en": "The maximum number of seconds that it takes to completely open or close. If the state of the device is not reported within this timeframe, the status will be actively retrieved. Add 5 seconds to be sure, so the state won't be retrieved too soon or unneeded.",
                "nl": "Het maximum aantal seconden dat het duurt om volledig te openen of te sluiten. Als de status van het gordijn niet binnen deze tijd binnenkomt wordt de status actief opgehaald. Voeg 5 seconden toe voor de zekerheid, zodat de status niet te vroeg of onnodig wordt opgehaald."
              }
            },
            {
              "id": "addBlockAlarm",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Add an alarm to block opening",
                "nl": "Alarm toevoegen om openen te blokkeren"
              },
              "hint": {
                "en": "Enable this to add a contact alarm to the blind. Then use flows to copy the alarm state from a window sensor, so the blind won't go down when the window is open.",
                "nl": "Zet dit aan als om een contactalarm toe te voegen aan dit gordijn. Gebruik vervolgens flows om de alarmstatus van een raansensor over te nemen, zodat het gordijn niet opengaat als het raam open is."
              }
            },
            {
              "id": "inRemoteGroup",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Part of remote groep",
                "nl": "Onderdeel van afstandsbediening-groep"
              },
              "hint": {
                "en": "If this blind is one of multiple devices controlled by the same remote at the same time, turn this on. This makes sure that when the remote changes the blinds, Homey will see all the changes. This is needed because often only one of the blinds will report the change from the remote, and the others won't.",
                "nl": "Zet dit aan als dit gordijn er één van meer gordijnen is die allemaal tegelijk met de zelfde afstandsbediening bediend worden. Dit zorgt ervoor dat Homey alle veranderingen ziet als de afstandsbediening is gebruikt. Dit is nodig omdat vaak maar van één van de gordijnen de wijziging van de afstandsbediening doorgeeft, en de overige niet."
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Properties",
            "nl": "Eigenschappen"
          },
          "children": [
            {
              "id": "deviceTypeName",
              "type": "label",
              "label": {
                "en": "Device type",
                "nl": "Apparaatklasse"
              },
              "value": "?"
            },
            {
              "id": "typeName",
              "type": "label",
              "label": {
                "en": "Type",
                "nl": "Type"
              },
              "value": "?"
            },
            {
              "id": "wirelessModeName",
              "type": "label",
              "label": {
                "en": "Wireless mode",
                "nl": "Type draadloze verbinding"
              },
              "value": "?"
            },
            {
              "id": "voltageModeName",
              "type": "label",
              "label": {
                "en": "Voltage mode",
                "nl": "Spanningstype"
              },
              "value": "?"
            }
          ]
        }
      ]
    },
    {
      "id": "driver_curtain",
      "name": {
        "en": "Curtain",
        "nl": "Gordijn"
      },
      "class": "curtain",
      "capabilities": [
        "windowcoverings_state",
        "windowcoverings_set",
        "alarm_contact",
        "measure_battery",
        "measure_mb_rssi"
      ],
      "energy": {
        "batteries": ["INTERNAL"]
      },
      "images": {
        "large": "/drivers/driver_curtain/assets/images/large.png",
        "small": "/drivers/driver_curtain/assets/images/small.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices", 
          "navigation": {
            "next": "add_my_devices" 
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices" 
        }    
      ],
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Parameters",
            "nl": "Parameters"
          },
          "children": [
            {
              "id": "maxTravelTime",
              "type": "number",
              "label": {
                "en": "Maximum travel time",
                "nl": "Maximale looptijd"
              },
              "value": 120,
              "min": 10,
              "max": 300,
              "units": {
                "en": "seconds",
                "nl": "seconden"
              },
              "hint": {
                "en": "The maximum number of seconds that it takes to completely open or close. If the state of the device is not reported within this timeframe, the status will be actively retrieved. Add 5 seconds to be sure, so the state won't be retrieved too soon or unneeded.",
                "nl": "Het maximum aantal seconden dat het duurt om volledig te openen of te sluiten. Als de status van het gordijn niet binnen deze tijd binnenkomt wordt de status actief opgehaald. Voeg 5 seconden toe voor de zekerheid, zodat de status niet te vroeg of onnodig wordt opgehaald."
              }            
            },
            {
              "id": "addBlockAlarm",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Add an alarm to block opening",
                "nl": "Alarm toevoegen om openen te blokkeren"
              },
              "hint": {
                "en": "Enable this to add a contact alarm to the blind. Then use flows to copy the alarm state from a window sensor, so the blind won't go down when the window is open. You may meed to restart the Motion Blinds app after the change for it to take effect.",
                "nl": "Zet dit aan als om een contactalarm toe te voegen aan dit gordijn. Gebruik vervolgens flows om de alarmstatus van een raansensor over te nemen, zodat het gordijn niet opengaat als het raam open is. Mogelijk moet de Motion Blinds app opnieuw gestart worden na het veranderen of effectief te worden."
              }
            },
            {
              "id": "inRemoteGroup",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Part of remote groep",
                "nl": "Onderdeel van afstandsbediening-groep"
              },
              "hint": {
                "en": "If this blind is one of multiple devices controlled by the same remote at the same time, turn this on. This makes sure that when the remote changes the blinds, Homey will see all the changes. This is needed because often only one of the blinds will report the change from the remote, and the others won't.",
                "nl": "Zet dit aan als dit gordijn er één van meer gordijnen is die allemaal tegelijk met de zelfde afstandsbediening bediend worden. Dit zorgt ervoor dat Homey alle veranderingen ziet als de afstandsbediening is gebruikt. Dit is nodig omdat vaak maar van één van de gordijnen de wijziging van de afstandsbediening doorgeeft, en de overige niet."
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Properties",
            "nl": "Eigenschappen"
          },
          "children": [
            {
              "id": "deviceTypeName",
              "type": "label",
              "label": {
                "en": "Device type",
                "nl": "Apparaatklasse"
              },
              "value": "?"
            },
            {
              "id": "typeName",
              "type": "label",
              "label": {
                "en": "Type",
                "nl": "Type"
              },
              "value": "?"
            },
            {
              "id": "wirelessModeName",
              "type": "label",
              "label": {
                "en": "Wireless mode",
                "nl": "Type draadloze verbinding"
              },
              "value": "?"
            },
            {
              "id": "voltageModeName",
              "type": "label",
              "label": {
                "en": "Voltage mode",
                "nl": "Spanningstype"
              },
              "value": "?"
            }
          ]
        }
      ]
    }
  ]
}